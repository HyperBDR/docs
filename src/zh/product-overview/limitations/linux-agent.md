# Linux Agent

## 操作系统支持

点击[云平台支持矩阵](https://oneprocloud.feishu.cn/sheets/VRqksSPEPhRTPStp3kVcItXNnyh?sheet=Y9fpqO)查看兼容性列表及最新支持状态。

## 文件系统与分区类型

### 文件系统

* EXT2
* EXT3
* EXT4
* XFS
* FAT
* exFAT

### 分区类型

* 主分区/扩展分区
* 逻辑卷管理器（LVM）
* MBR
* GPT

## 内核支持

由于运行时涉及内核模块的使用，Linux Agent的安装与执行取决于内核模块的版本。目前支持的内核版本范围为2.6.32到5.8，且这些版本均为标准社区版本构建。

### 限制

* 目前不支持带有云标签的内核版本。如果需要特定的内核版本支持，请联系技术支持。
* 关于限制，目前版本4.17.0及以上的内核版本，如果源主机重启，增量传输将无法继续，云容灾平台（HyperBDR）会自动切换回全量同步模式。


## 基本要求

### 硬件要求:
- **CPU:** x86-64位处理器（i386或更高版本）
- **内存:** 每个挂载点大约消耗300MB的缓存空间。例如，如果有3个挂载点，大约需要1000MB内存。
- **磁盘空间:**
  - *软件空间:* 软件安装需至少100MB可用空间。
  - *缓存空间:* 每个文件系统需保留大于10%的可用空间。
- **网络连接:** 至少10Mbps的连接带宽，连接至目标端点。
- **系统固件:** BIOS或UEFI.
- **磁盘布局:** MBR或GPT.
- **虚拟化支持:** 支持完全虚拟化，但对半虚拟化（如XenServer）支持有限，可能在最终启动时需要手动修复。

### 系统启动要求:
- 支持grub和grub2启动方法的系统可同步并启动。
- 不支持LILO启动方法的主机驱动修复。
- 如果存在单独的/boot分区，它必须在/etc/fstab中定义；否则，启动驱动修复时会失败，导致启动失败。如果该定义缺失，建议手动添加（该分区没有挂载在fstab表中）。
- 主机的第一块磁盘必须是启动磁盘。目前不支持在灾难恢复设置中指定启动磁盘。

### 磁盘与分区限制:
- 当一个共享磁盘被多个源主机挂载使用时，它会根据主机进行迁移，因此该共享磁盘会被多次迁移，目标端会有多个相同的磁盘，需要手动清理冗余磁盘，只保留一个共享的磁盘供多个主机共享。
- 当前不支持多路径远程磁盘（FC、IP SAN）。
- 当前不支持未挂载的分区和磁盘（未挂载到特定目录的裸磁盘）。
- LUKS 加密磁盘/分区不支持。
- 网络共享挂载目录（如NFS/NAS远程网络访问数据）需要使用独立的文件级同步工具进行数据同步。
- 使用iSCSI磁盘时，注意不要修改原始发起器名称，以免影响业务系统。
- 当前不支持Btrfs文件系统。
- 不支持LVM精简逻辑卷。

### 应用冲突检查:
- 系统中不得存在与Linux Agent相同的组件。

::: warning

在使用 Linux Agent 时，请务必关注业务运行时的内存使用情况。特别是当业务系统通过 `scp`、`rsync` 等方式长时间向主机传输数据，且系统内存使用率持续超过 70% 时，应谨慎启用 Linux Agent。在这种情况下，可能会因内存资源不足触发系统的 Out of Memory（OOM）机制，导致服务中断甚至系统重启，严重影响业务的连续性。  

建议在此场景下提前优化系统资源分配，或选择合适的时间窗口运行 Linux Agent，以降低风险。

:::

